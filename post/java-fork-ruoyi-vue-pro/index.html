<!DOCTYPE html>
<html lang="en-us">
  <head>
    
    <script type="application/ld+json">

{  
  "@context":"http://schema.org",
  "@type":"Website",
  "@id":"https:\/\/ivanhan0511.github.io\/",
  "author": {
    "@type": "Person",
    "name": "Ivan Han",
    
    "image": "https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b"
    
  },
  "name":"Ivan Blog",
  "description":"\u003cp\u003eTo deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,\n\u003ca href=\u0022https:\/\/github.com\/YunaiV\/ruoyi-vue-pro\u0022\u003eruoyi-vue-pro\u003c\/a\u003e is a good project\u003c\/p\u003e\n\u003cp\u003eBut the stronger, the more complex. This post is the annotation for this project, by my personer opinion\u003c\/p\u003e",
  "url":"https:\/\/ivanhan0511.github.io\/post\/java-fork-ruoyi-vue-pro\/",
  "keywords":"[Java, spingboot, ruoyi-vue-pro, Ivan, SoftwareEngineer, C\/C\u002b\u002b, Java, Coffee, Bass, Bicycle, Badminton]"
}

</script>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="generator" content="Hugo 0.123.7 with theme Tranquilpeak 0.5.3-BETA">
<meta name="author" content="Ivan Han">
<meta name="keywords" content="Java, spingboot, ruoyi-vue-pro, Ivan, SoftwareEngineer, C/C&#43;&#43;, Java, Coffee, Bass, Bicycle, Badminton">
<meta name="description" content="To deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,
ruoyi-vue-pro is a good project
But the stronger, the more complex. This post is the annotation for this project, by my personer opinion">


<meta property="og:description" content="To deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,
ruoyi-vue-pro is a good project
But the stronger, the more complex. This post is the annotation for this project, by my personer opinion">
<meta property="og:type" content="article">
<meta property="og:title" content="How to fork ruoyi-vue-pro">
<meta name="twitter:title" content="How to fork ruoyi-vue-pro">
<meta property="og:url" content="https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/">
<meta property="twitter:url" content="https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/">
<meta property="og:site_name" content="Ivan Blog">
<meta property="og:description" content="To deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,
ruoyi-vue-pro is a good project
But the stronger, the more complex. This post is the annotation for this project, by my personer opinion">
<meta name="twitter:description" content="To deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,
ruoyi-vue-pro is a good project
But the stronger, the more complex. This post is the annotation for this project, by my personer opinion">
<meta property="og:locale" content="en-us">

  
    <meta property="article:published_time" content="2024-10-25T11:22:00">
  
  
    <meta property="article:modified_time" content="2024-10-25T11:22:00">
  
  
  
    
      <meta property="article:section" content="Java">
    
      <meta property="article:section" content="WebFramework">
    
  
  
    
      <meta property="article:tag" content="Java">
    
      <meta property="article:tag" content="Springboot">
    
      <meta property="article:tag" content="ruoyi-vue-pro">
    
  


<meta name="twitter:card" content="summary">

  <meta name="twitter:site" content="@ivanhan0511">


  <meta name="twitter:creator" content="@ivanhan0511">






  <meta property="og:image" content="https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b?s=640">
  <meta property="twitter:image" content="https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b?s=640">




  <meta property="og:image" content="https://ivanhan0511.github.io/image-2.png">
  <meta property="twitter:image" content="https://ivanhan0511.github.io/image-2.png">


  <meta property="og:image" content="https://ivanhan0511.github.io/image-1.png">
  <meta property="twitter:image" content="https://ivanhan0511.github.io/image-1.png">


    <title>How to fork ruoyi-vue-pro</title>

    <link rel="icon" href="https://ivanhan0511.github.io/favicon.png">
    

    

    <link rel="canonical" href="https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/">

    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" integrity="sha512-iBBXm8fW90+nuLcSKlbmrPcLa0OT92xO1BIsZ+ywDWZCvqsWgccV3gFoRBv0z+8dLJgyAHIhR35VZc2oM/gI1w==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha512-H9jrZiiopUdsLpg94A333EfumgUBpO9MdbxStdeITo+KEIMaNfHNvwyjjDJb+ERPaRS6DpyRlKbvPUasNItRyw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    
    
    <link rel="stylesheet" href="https://ivanhan0511.github.io/css/style-h6ccsoet3mzkbb0wngshlfbaweimexgqcxj0h5hu4h82olsdzz6wmqdkajm.min.css" />
    
    

    
      
    
    
  </head>

  <body>
    <div id="blog">
      <header id="header" data-behavior="4">
  <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
  <div class="header-title">
    <a class="header-title-link" href="https://ivanhan0511.github.io/" aria-label="Go to homepage">Ivan Blog</a>
  </div>
  
    
      <a class="header-right-picture "
         href="https://ivanhan0511.github.io/#about" aria-label="Open the link: /#about">
    
    
    
      
        <img class="header-picture" src="https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b?s=90" alt="Author&#39;s picture" />
      
    
    </a>
  
</header>

      <nav id="sidebar" data-behavior="4">
  <div class="sidebar-container">
    
      <div class="sidebar-profile">
        <a href="https://ivanhan0511.github.io/#about" aria-label="Read more about the author">
          <img class="sidebar-profile-picture" src="https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b?s=110" alt="Author&#39;s picture" />
        </a>
        <h4 class="sidebar-profile-name">Ivan Han</h4>
        
          <h5 class="sidebar-profile-bio">I need <strong>slow down</strong></h5>
        
      </div>
    
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/" title="Home">
    
      <i class="sidebar-button-icon fas fa-lg fa-home" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Home</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/categories" title="Categories">
    
      <i class="sidebar-button-icon fas fa-lg fa-bookmark" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Categories</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/tags" title="Tags">
    
      <i class="sidebar-button-icon fas fa-lg fa-tags" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Tags</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/archives" title="Archives">
    
      <i class="sidebar-button-icon fas fa-lg fa-archive" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Archives</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/#about" title="About">
    
      <i class="sidebar-button-icon fas fa-lg fa-question" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">About</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://github.com/ivanhan0511" target="_blank" rel="noopener" title="GitHub">
    
      <i class="sidebar-button-icon fab fa-lg fa-github" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">GitHub</span>
    </a>
  </li>

  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://stackoverflow.com/users/14423790/ivan-han" target="_blank" rel="noopener" title="Stack Overflow">
    
      <i class="sidebar-button-icon fab fa-lg fa-stack-overflow" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">Stack Overflow</span>
    </a>
  </li>


    </ul>
    <ul class="sidebar-buttons">
      
  <li class="sidebar-button">
    
      <a class="sidebar-button-link " href="https://ivanhan0511.github.io/index.xml" title="RSS">
    
      <i class="sidebar-button-icon fas fa-lg fa-rss" aria-hidden="true"></i>
      
      <span class="sidebar-button-desc">RSS</span>
    </a>
  </li>


    </ul>
  </div>
</nav>

      
  <div class="post-header-cover
              text-center
              post-header-cover--full"
       style="background-image:url('/image-2.png')"
       data-behavior="4">
    
  </div>


      <div id="main" data-behavior="4"
        class="hasCover
               hasCoverMetaOut
               hasCoverCaption">
        <article class="post" id="top">
          
            <span class="post-header-cover-caption caption">A beautiful image</span>
          
          
            <div class="post-header main-content-wrap text-center">
  
    <h1 class="post-title">
      How to fork ruoyi-vue-pro
    </h1>
  
  
  <div class="postShorten-meta post-meta">
    
      <time datetime="2024-10-25T11:22:00&#43;08:00">
        
  
  
  
  
    October 25, 2024
  

      </time>
    
    
  
  
    <span>in</span>
    
      <a class="category-link" href="https://ivanhan0511.github.io/categories/java">Java</a>, 
    
      <a class="category-link" href="https://ivanhan0511.github.io/categories/webframework">WebFramework</a>
    
  

  </div>

</div>
          
          <div class="post-content markdown">
            <div class="main-content-wrap">
              <p>To deploy a Springboot web framework, whatever development or production, and whatever single or distributed entity,
<a href="https://github.com/YunaiV/ruoyi-vue-pro">ruoyi-vue-pro</a> is a good project</p>
<p>But the stronger, the more complex. This post is the annotation for this project, by my personer opinion</p>
<h1 id="table-of-contents">Table of Contents</h1>
<nav id="TableOfContents">
  <ul>
    <li><a href="#目录">目录</a></li>
    <li><a href="#chapter-1">I. ARCHITECTURE PRINCIPLE</a></li>
    <li><a href="#chapter-2">II. BUSINESS DESIGN</a>
      <ul>
        <li><a href="#a-controller">A. Controller</a>
          <ul>
            <li><a href="#1-input-validation">1. Input validation</a></li>
            <li><a href="#2-output-convertor">2. Output convertor</a></li>
          </ul>
        </li>
        <li><a href="#b-service">B. Service</a>
          <ul>
            <li><a href="#1-transactional">1. Transactional</a></li>
            <li><a href="#2-job">2. Job</a></li>
            <li><a href="#3-third-part-api">3. Third-part API</a></li>
            <li><a href="#4-applicationevent-monitor">4. ApplicationEvent Monitor</a></li>
          </ul>
        </li>
        <li><a href="#c-dao-mapper">C. DAO Mapper</a>
          <ul>
            <li><a href="#1-multiple-db">1. Multiple DB</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#chapter-3">III. TESTING</a></li>
    <li><a href="#chapter-4">IV. OPERATION</a>
      <ul>
        <li><a href="#ci">CI</a></li>
        <li><a href="#api-document">API Document</a></li>
        <li><a href="#deployment">Deployment</a></li>
      </ul>
    </li>
    <li><a href="#chapter-5">V. COMMON</a>
      <ul>
        <li><a href="#a-exception">A. Exception</a></li>
        <li><a href="#b-log">B. Log</a></li>
        <li><a href="#c-cache">C. Cache</a></li>
        <li><a href="#d-streamutils">D. StreamUtils</a></li>
        <li><a href="#epaylock">E.PayLock</a></li>
        <li><a href="#ftenant">F.Tenant</a></li>
        <li><a href="#g-connection-pool">G. Connection Pool</a></li>
        <li><a href="#h-security">H. Security</a>
          <ul>
            <li><a href="#1-免登录改哪里">1. 免登录改哪里</a></li>
            <li><a href="#2-登录方式有哪些">2. 登录方式有哪些</a></li>
            <li><a href="#3-permission权限设置-部门数据隔离">3. permission权限设置, 部门数据隔离</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#chapter-6">VI. APPENDIX</a>
      <ul>
        <li><a href="#缩写信息">缩写信息</a></li>
        <li><a href="#命名规范">命名规范</a></li>
      </ul>
    </li>
    <li><a href="#vii-tmp">VII. TMP</a></li>
  </ul>
</nav>

<p>Tip: The most really important TECH cores, like design and architecture, service for BUSINESS.</p>
<p>NO BEST, ONLY BETTER.</p>
<h2 id="目录">目录</h2>
<ul>
<li><a href="#chapter-1">I. ARCHITECTURE PRINCIPLE</a></li>
<li><a href="#chapter-2">II. BUSINESS DESIGN</a></li>
<li><a href="#chapter-3">III. TESTING</a></li>
<li><a href="#chapter-4">IV. OPERATION</a></li>
<li><a href="#chapter-5">V. COMMON</a></li>
</ul>
<h2 id="chapter-1">I. ARCHITECTURE PRINCIPLE</h2>
<hr>
<p>So far, Sep 24, 2024</p>
<ol>
<li>
<p>Reading the <a href="https://github.com/YunaiV/ruoyi-vue-pro">docs</a> of ruoyi-vue-pro is the best way</p>
</li>
<li>
<p>如果团队比较小, 达不到上百人, 那么就不拆服务直接单体运行, 掌握设计的&quot;度&quot;, 非常重要!!!<br>
除非有动态扩缩，不同的模块由不同的团队单独维护，或者模块单独卖之类的需求，否则拆服务弊大于利</p>
</li>
<li>
<p>单仓多项目，大厂很多项目也在用这种方式. 有些人说会发展为分布式单体的，是对maven打包不大熟吧。运维角度来看，单仓和多仓git管理的打包产物都一样的，只是管理方式不一样</p>
<p>有些&quot;伪微服务&quot;项目，想跑起来就得clone一堆仓库，动不动出问题就是某个仓库更新了而关联模块的仓库没更新……</p>
</li>
<li>
<p>另外, git自带子模块, 建一个总的仓库, 各个服务作为子模块版本各自管理, 也是一种兼容方案</p>
</li>
<li>
<p>尽管代码中有DO, 但并不采用DDD(领域驱动设计)!!!</p>
</li>
<li>
<p>不使用RESTful style, 因为RESTful仍然有表达不明确的业务场景, 仍然需要使用传统&quot;动词&quot;来描述接口性质/意图, 且对团队要求较高, 一不小心就会破坏掉所谓的RESTful style</p>
</li>
</ol>
<p><a href="https://mp.weixin.qq.com/s/4QvwyRH6Q1Ut4usYKRKpAA">写代码有这16个好习惯，可以减少80%非业务的BUG！</a></p>
<h2 id="chapter-2">II. BUSINESS DESIGN</h2>
<hr>
<p>基于现役SpringBoot业务流层面的全栈开发的经验, 制定出更优雅的代码设计规范</p>
<ol>
<li>
<p>Write down all the details of requirement seriously</p>
</li>
<li>
<p>Draw UML(work flow)设计初期, 后端概要/前端原型图 均不要太正式, 需要不断试错, 兼容前端表现(<em>基于源码尽可能少量修改</em>)与后端数据结构(<em>尽可能解耦</em>)的合理性</p>
</li>
<li>
<p>Designing the data structure and its relationship on the paper / iPad is the most important thing!</p>
</li>
<li>
<p>Record the SQL into the <code>./sql/mysql/</code>. If need ER, export from MySQL, of course, my personal choice</p>
</li>
</ol>
<p>With the infra code-auto-generation, most backend and frontend codes can be generated. Very helpful and so handy</p>
<h3 id="a-controller">A. Controller</h3>
<p>[TODO]: 继续描述源码在前后端结合时, 互相传递的参数以及显示字段的设计思路</p>
<h4 id="1-input-validation">1. Input validation</h4>
<p><strong>入参VO中的字段</strong></p>
<ul>
<li>基本遵从DO中的设计, 直接传输ID即可</li>
<li>因为前端加载页面时, 就已经通过多个接口的simple-list获取了各种下拉框的数据</li>
<li>提交时也就不需要<code>name</code>之类的input字符串数据, 后台再通过字符串查询blablabla. 而是直接提交其ID即可, 后端直接用</li>
<li>本着创建与更新都采用同一套xxxSaveReqVO的原则</li>
</ul>
<p><strong>@InEnum &amp; @DictFormat</strong></p>
<p><code>@InEnum</code>, 是程序枚举类约定好的, 不受普通用户在Admin Web管理的<br>
<code>@DictFormat</code>, 是在Excel导入/导出时自动转化用的</p>

  
    
  
  
    
  
  
  


<figure class="highlight java language-java">
  <figcaption>
    
      <span>validInput</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre>
        </td>
        <td class="code">
          <pre class="code-highlight language-java java"><code class="java">@Schema(description = &#34;管理后台 - Measure 图像绑定 Request VO&#34;)
@Data
public class MeasureBindPicReqVO {
    @Schema(description = &#34;放大倍率&#34;, requiredMode = Schema.RequiredMode.REQUIRED, example = &#34;200&#34;)
    @NotNull(message = &#34;放大倍率不能为空&#34;)
    @InEnum(value = XxxEnum.class, message = &#34;xxx必须是 {value}&#34;)
    private Integer magnification;
}</code></pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>

<h4 id="2-output-convertor">2. Output convertor</h4>
<p><strong>getPage</strong></p>
<ul>
<li>如果是产品名(等文字类描述), 无论是分页查询还是通过ID单体查询, 如果传输数字, 依靠前端二次轮询其对应的名称(等文字类描述), 则消耗太大, 所以需要后端通过Java stream复杂组装</li>
<li>如果是性别等通用字段, 输出也仍然是字典数值, 前端代码指定其字典类型, 通过字典接口从后端获取,<br>
并转换为带有标签颜色的文字(<span class="highlight-text green">成功</span> / <span class="highlight-text red">失败</span>等)</li>
</ul>
<p><strong>Excel导出</strong>

  
    
  
  
  
  


<figure class="highlight  language-">
  <figcaption>
    
      <span>java</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre>
        </td>
        <td class="code">
          <pre class="code-highlight language- "><code class="">@Schema(description = &#34;管理后台 - 商品 SPU Response VO&#34;)
@Data
@ExcelIgnoreUnannotated
public class ProductSpuRespVO {
    @Schema(description = &#34;商品状态&#34;, requiredMode = Schema.RequiredMode.REQUIRED, example = &#34;1&#34;)
    @ExcelProperty(value = &#34;商品状态&#34;, converter = DictConvert.class)
    @DictFormat(DictTypeConstants.PRODUCT_SPU_STATUS)
    private Integer status;
}</code></pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
</p>
<h3 id="b-service">B. Service</h3>
<p>Just work for <strong>BUSINESS</strong> only</p>
<ul>
<li>Service中, 只体现业务. 而需要CRUD的时候, 调用Mapper的方法
<ul>
<li>service中的数据流转, 视情况而定, VO / DTO / DO 均可以</li>
<li>SQL事务, 需要做好规划
<ul>
<li>通用事务方法的抽象</li>
<li>哪里添加事务注解</li>
<li>获取数据时是否已经提交事务</li>
<li>事务的隔离与传播, 是否运用得当</li>
<li>事务调用的生命周期/context</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>基本遵循源码自动生成的代码, 在良好的数据结构设计的基础上, 很多问题都能迎刃而解. 需要额外定制的几个参考用例, 如后文</p>
<p>业务流主方法中, 尽量只描述几个清晰的动作, 通用大部分业务流程, 有差异的处理流程, 放在前置or后置的<code>handler</code>中

  
    
  
  
    
  
  
  


<figure class="highlight java language-java">
  <figcaption>
    
      <span>handler</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre>
        </td>
        <td class="code">
          <pre class="code-highlight language-java java"><code class="java">@Resource
private List&lt;XxxModuleFunctionHandler&gt; saleOrderHandlers;

@Override
@Transactional(rollbackFor = Exception.class)
public Long createSaleOrder(ErpSaleOrderSaveReqVO createReqVO) {
    // 1.1 校验订单项的有效性
    // 1.2 校验客户
    // 1.3 校验结算账户
    // 1.4 校验销售人员
    // 1.5 生成订单号，并校验唯一性
    // 1.6 计算价格

    // 2.0 前置处理(定制化处理)
    saleOrderHandlers.forEach(handler -&gt; handler.beforeCreate(customerDO, saleOrder));

    // 3.1 插入订单
    // 3.2 插入订单项

    // 4.0 后置处理(定制化处理)
    saleOrderHandlers.forEach(handler -&gt; handler.afterCreate(customerDO, saleOrder));

    return saleOrder;</code></pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
</p>
<h4 id="1-transactional">1. Transactional</h4>
<p>这里不会讲原理, 只讲注意点, 设计思路, 详细文章见java-spring.md</p>
<p>TODO: 生命周期, 事务传播, 事务隔离</p>
<h4 id="2-job">2. Job</h4>
<p>Quartz</p>
<h4 id="3-third-part-api">3. Third-part API</h4>
<p>以下2种都是Spring官方推荐的, 都是对HttpClient的封装, 简化使用, 提高效率</p>
<ul>
<li>RestTemplate: Sync,

  
    
  
  
    
  
  
  


<figure class="highlight java language-java">
  <figcaption>
    
      <span>doc</span>
    
  </figcaption>
  <table>
    <tbody>
      <tr>
        <td class="gutter">
          <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre>
        </td>
        <td class="code">
          <pre class="code-highlight language-java java"><code class="java">  @Deprecated(since = &#34;6.0&#34;, forRemoval = true)
  public void setReadTimeout(int timeout) {}
  </code></pre>
        </td>
      </tr>
    </tbody>
  </table>
</figure>
</li>
<li>WebClient: Async, since Sping 5.0</li>
</ul>
<h4 id="4-applicationevent-monitor">4. ApplicationEvent Monitor</h4>
<p>module-bpm模块中有用到, 拿来主义, 上游入库后&quot;生产&quot;出下游库存就依靠这个监听者观察客户定制的BOM原料是否满足, 满足即可生产
[TODO]:</p>
<h3 id="c-dao-mapper">C. DAO Mapper</h3>
<p>曾经我是拒绝的
<blockquote>
  <p>
- **JUST** use MyBatisPLus maven and use default CRUD methods.  
- **REFUSE** to use `QueryWrapper`, only use MyBatis' XML mapper.
- MybatisPlus的QueryWrapper越看越像Python SQLAlchemy这类ORM, 学习成本高, 且一旦语句优化不得当, 会造成性能损失
- 按照MyBatis写XML更像原生SQL, 熟练运用SQL是一件愉快的事情
</p>
  <footer>
    <strong></strong>
    
      
        <cite></cite>
      
    
  </footer>
</blockquote></p>
<p>真香打脸
<blockquote>
  <p>
- Mapper中, 做统一抽象, 例如`selectPage`, `selectByMobile`, 而不是直接暴露`selectOne`
- 需要控制mapper中的SQL join(如下文)
- 复杂业务都放在service中解耦, 各个业务尽量减少连接次数, 批量查询, stream / mapper / set 拼接, 批量updateOrInsert
</p>
  <footer>
    <strong></strong>
    
      
        <cite></cite>
      
    
  </footer>
</blockquote></p>
<p><a href="https://www.cnblogs.com/youmingDDD/p/11921187.html">MySQL多次单表查询和多表联合查询</a></p>
<blockquote>
<p>Tip:不建议执行三张表以上的多表联合查询
对数据量不大的应用来说，多表联合查询开发高效，但是多表联合查询在表数据量大，并且没有索引的时候，如果进行笛卡儿积，那数据量会非常大，sql执行效率会非常低</p>
<p>多次单表查询在service层进行合并好处：
1、缓存效率更高,许多应用程序可以方便地缓存单表查询对应的结果对象。如果关联中的某个表发生了变化，那么就无法使用查询缓存了，而拆分后，如果某个表很少改变，那么基于该表的查询就可以重复利用查询缓存结果了。
2、多表信息联合的列表页面分页显示，只需要显示一部分的数据，如果是多表联合查询那要把所有数据联结查出来再执行limit，如果是多次单表查询，先对单表进行筛选，先执行limit再与其余表去关联，数据量会大大减小
3、如果数据库没有进行读写分离（主从备份），在并发量高的时候，由于写表会加排他锁，把多表联合查询改成单表查询后锁的粒度变小，减少了锁的竞争
4、在数据量变大之后，普遍会采用分库分表的方法来缓解数据库的压力，采用单表查询比多表联合查询更容易进行分库，不需要对sql语句进行大量的修改，更易扩展.分库分表的中间件一般对跨库join都支持不好
5、查询本身效率也可能会有所提升。查询 id 集的时候，使用 IN（）代替关联查询，可以让 MySQL 按照 ID 顺序进行查询，这可能比随机的关联要更高效。
6、业务高速增长时，数据库作为最底层，最容易遇到瓶颈，单机数据库计算资源很贵，数据库同时要服务写和读，都需要消耗CPU，为了能让数据库的吞吐变得更高，
而业务又不在乎那几百微妙到毫秒级的延时差距，业务会把更多计算放到service层做，毕竟计算资源很好水平扩展，数据库很难啊，这是一种重业务，轻DB的架构
7、可以减少冗余记录的查询，在应用层做关联查询，意味着对于某条记录应用只需要查询一次，而在数据库中做关联查询，则可能需要重复地访问一部分数据。
更进一步，这样做相当于在应用中实现了哈希关联，而不是使用 MySQL 的嵌套循环关联。某些场景哈希关联的效率要高很多。</p>
<p>多次单表查询在service层进行合并缺点：
1、需要进行多次的数据库连接
2、代码更复杂</p>
<p>总结：
个人觉得还是做多次单表查询更好，更易扩展，当然数据量不大时，直接联合查询开发更方便</p>
</blockquote>
<p><a href="https://cloud.tencent.com/developer/article/1443320">为什么mysql不建议执行超过3表以上的多表关联查询</a></p>
<blockquote>
<p>简单地，例如分类和商品, 或者部门和员工, 一对多, 可以对每个表进行一次单表查询，然后将结果在应用程序中进行关联。例如，下面这个查询：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">select</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">from</span> <span style="color:#a6e22e">tag</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">join</span> <span style="color:#a6e22e">tag_post</span> <span style="color:#a6e22e">on</span> <span style="color:#a6e22e">tag_post</span>.<span style="color:#a6e22e">tag_id</span><span style="color:#f92672">=</span><span style="color:#a6e22e">tag</span>.<span style="color:#a6e22e">id</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">join</span> <span style="color:#a6e22e">post</span> <span style="color:#a6e22e">on</span> <span style="color:#a6e22e">tag_post</span>.<span style="color:#a6e22e">post_id</span><span style="color:#f92672">=</span><span style="color:#a6e22e">post</span>.<span style="color:#a6e22e">id</span>
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">where</span> <span style="color:#a6e22e">tag</span>.<span style="color:#a6e22e">tag</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">’</span><span style="color:#a6e22e">mysql</span><span style="color:#960050;background-color:#1e0010">’</span>;
</span></span></code></pre></div><p>可以分解成下面这些查询来代替：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-javascript" data-lang="javascript"><span style="display:flex;"><span><span style="color:#a6e22e">Select</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">from</span> <span style="color:#a6e22e">tag</span> <span style="color:#a6e22e">where</span> <span style="color:#a6e22e">tag</span><span style="color:#f92672">=</span><span style="color:#960050;background-color:#1e0010">’</span><span style="color:#a6e22e">mysql</span><span style="color:#960050;background-color:#1e0010">’</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Select</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">from</span> <span style="color:#a6e22e">tag_post</span> <span style="color:#a6e22e">where</span> <span style="color:#a6e22e">tag_id</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1234</span>;
</span></span><span style="display:flex;"><span><span style="color:#a6e22e">Select</span> <span style="color:#f92672">*</span> <span style="color:#a6e22e">from</span> <span style="color:#a6e22e">post</span> <span style="color:#a6e22e">where</span> <span style="color:#a6e22e">id</span> <span style="color:#66d9ef">in</span>(<span style="color:#ae81ff">123</span>,<span style="color:#ae81ff">456</span>,<span style="color:#ae81ff">567</span>,<span style="color:#ae81ff">9989</span>,<span style="color:#ae81ff">8909</span>);
</span></span></code></pre></div><p>为什么会这样做呢？原本一条查询，这里却变成了多条查询，返回结果又是一模一样。</p>
<p>事实上，用分解关联查询的方式重构查询具有如下优势：</p>
<ol>
<li>让缓存的效率更高。 许多应用程序可以方便地缓存单表查询对应的结果对象。另外对于MySQL的查询缓存来说，如果关联中的某个表发生了变化，那么就无法使用查询缓存了，而拆分后，如果某个表很少改变，那么基于该表的查询就可以重复利用查询缓存结果了。</li>
<li>将查询分解后，执行单个查询可以减少锁的竞争。</li>
<li>在应用层做关联，可以更容易对数据库进行拆分，更容易做到高性能和可扩展。</li>
<li>查询本身效率也可能会有所提升</li>
<li>可以减少冗余记录的查询。</li>
<li>更进一步，这样做相当于在应用中实现了哈希关联，而不是使用MySQL的嵌套环关联，某些场景哈希关联的效率更高很多。</li>
</ol>
</blockquote>
<p><a href="https://www.zhihu.com/question/56236190">《阿里巴巴JAVA开发手册》里面写超过三张表禁止join 这是为什么？这样的话那sql要怎么写？</a></p>
<p><a href="https://www.zhihu.com/question/68258877">MySQL多表关联查询效率高点还是多次单表查询效率高，为什么？</a></p>
<h4 id="1-multiple-db">1. Multiple DB</h4>
<p><strong>Settings</strong></p>
<ul>
<li>
<p>application.yml中设置PageHelper的 helperDialect, 兼容&quot;mysql&quot;和&quot;sqlserver&quot;两种数据库的语法</p>
</li>
<li>
<p>使用多数据源时, 配置PageHelper时要注意(只有在使用application.yml格式的配置文件时会有问题):<br>
<blockquote>
  <p>
  ...
  pagehelper:
    autoRuntimeDialect: true  # 此处的配置项是驼峰, 不是IDEA自动提示的`auto-runtime-dialect: true`
  ...
  </p>
  <footer>
    <strong>application.yml</strong>
    
      
        <cite></cite>
      
    
  </footer>
</blockquote>
因为如果驼峰被自动转译为横线分隔符, 会导致PageHelper切换多数据源时失效</p>
</li>
</ul>
<h2 id="chapter-3">III. TESTING</h2>
<hr>
<h2 id="chapter-4">IV. OPERATION</h2>
<hr>
<p>运营, 软文推广, 运维, 部署, 自动化测试, 自动化接口文档等</p>
<h3 id="ci">CI</h3>
<p>TODO</p>
<h3 id="api-document">API Document</h3>
<ul>
<li><input disabled="" type="checkbox"> Swagger UI category, description and list</li>
<li><input disabled="" type="checkbox"> With session token</li>
</ul>
<h3 id="deployment">Deployment</h3>
<p>No best, only better! We <strong>DON&rsquo;T</strong> want to use Docker.</p>
<p><strong>个人开发</strong></p>
<ul>
<li>前端:
<ul>
<li>使用<code>.env.local</code>配置文件, 指向<code>http://127.0.0.1:48080</code></li>
<li>调试命令<code>npm run dev</code></li>
</ul>
</li>
<li>后端:
<ul>
<li>使用<code>application-local.yaml</code>配置文件, 数据源指向localhost</li>
<li>IDE调试即可</li>
</ul>
</li>
</ul>
<p><strong>开发联调</strong></p>
<ul>
<li>前端:
<ul>
<li>使用<code>.env.dev</code>配置文件, 指向<code>https://mall-srv.xxx.com</code></li>
<li>调试命令<code>npm run dev-server</code></li>
<li>打包命令<code>npm run build:dev</code></li>
</ul>
</li>
<li>后端:
<ul>
<li>使用<code>application-dev.yaml</code>配置文件, 数据源指向localhost (服务器本地)</li>
<li>配置<code>https://mall.xxx.com</code>和<code>https://mall-srv.xxx.com</code>, 域名解析, 开放端口及备案, SSL证书</li>
<li>使用<code>screen</code>运行在云服务器即可, 供前端调试用</li>
<li>Nginx采用独立域名访问的方式, 配置如下</li>
</ul>
</li>
</ul>
<p><strong>生产环境</strong></p>
<ul>
<li>前端:
<ul>
<li>使用<code>.env.prod</code>配置文件, 指向<code>http://127.0.0.1:48080</code></li>
<li>打包命令<code>npm run build:prod</code></li>
</ul>
</li>
<li>后端:
<ul>
<li>使用<code>application-prod.yaml</code>配置文件, 数据源指向localhost (服务器本地)</li>
<li>配置<code>https://mall.xxx.com</code>, 域名解析, 开放端口及备案, SSL证书</li>
<li>使用<code>screen</code>运行在云服务器即可, 供前端调试用</li>
<li>Nginx采用服务器局域网IP访问的方式, 配置如下</li>
</ul>
</li>
</ul>


  
  
  
  
  

  
  
  
  
  


  
    
  
  

<figure class="codeblock codeblock--tabbed">
  <figcaption>
    
      <span>nginx.conf</span>
    
    <ul class="tabs">
      
        <li class="tab active">dev</li>
      
        <li class="tab ">prod</li>
      
    </ul>
  </figcaption>
  <div class="tabs-content">
    
      
      <figure class="highlight language-dev dev" style="display: block;">
        <table>
          <tbody>
            <tr>
              <td class="gutter">
                <pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br><span>48</span><br><span>49</span><br><span>50</span><br><span>51</span><br><span>52</span><br><span>53</span><br><span>54</span><br></pre>
              </td>
              <td class="code">
                <pre class="code-highlight language-dev dev"><code class="dev">worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    gzip on;
    gzip_min_length 1k;     # 设置允许压缩的页面最小字节数
    gzip_buffers 4 16k;     # 用来存储 gzip 的压缩结果
    gzip_http_version 1.1;  # 识别 HTTP 协议版本
    gzip_comp_level 2;      # 设置 gzip 的压缩比 1-9。1 压缩比最小但最快，而 9 相反
    gzip_types text/plain application/x-javascript text/css application/xml application/javascript; # 指定压缩类型
    gzip_proxied any;       # 无论后端服务器的 headers 头返回什么信息，都无条件启用压缩

    server { ## 前端项目
        listen       80;
        server_name  mall.xxx.com; ## 重要！！！修改成你的前端域名

        location / { ## 前端项目
            root   /work/projects/yudao-ui-admin;
            index  index.html index.htm;
            try_files $uri $uri/ /index.html;
        }
    }

    server { ## 后端项目
        listen       80;
        server_name  api.iocoder.cn; ## 重要！！！修改成你的外网 IP/域名

        ## 不要使用 location / 转发到后端项目，因为 druid、admin 等监控，不需要外网可访问。或者增加 Nginx IP 白名单限制也可以。

        location /admin-api/ { ## 后端项目 - 管理后台
            proxy_pass http://localhost:48080/admin-api/; ## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP
            proxy_set_header Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header REMOTE-HOST $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /app-api/ { ## 后端项目 - 用户 App
            proxy_pass http://localhost:48080/app-api/; ## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP
            proxy_set_header Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header REMOTE-HOST $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
}</code></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </figure>
    
      
      <figure class="highlight language-prod prod" style="display: none;">
        <table>
          <tbody>
            <tr>
              <td class="gutter">
                <pre><span>1</span><br><span>2</span><br><span>3</span><br><span>4</span><br><span>5</span><br><span>6</span><br><span>7</span><br><span>8</span><br><span>9</span><br><span>10</span><br><span>11</span><br><span>12</span><br><span>13</span><br><span>14</span><br><span>15</span><br><span>16</span><br><span>17</span><br><span>18</span><br><span>19</span><br><span>20</span><br><span>21</span><br><span>22</span><br><span>23</span><br><span>24</span><br><span>25</span><br><span>26</span><br><span>27</span><br><span>28</span><br><span>29</span><br><span>30</span><br><span>31</span><br><span>32</span><br><span>33</span><br><span>34</span><br><span>35</span><br><span>36</span><br><span>37</span><br><span>38</span><br><span>39</span><br><span>40</span><br><span>41</span><br><span>42</span><br><span>43</span><br><span>44</span><br><span>45</span><br><span>46</span><br><span>47</span><br></pre>
              </td>
              <td class="code">
                <pre class="code-highlight language-prod prod"><code class="prod">worker_processes  1;

events {
    worker_connections  1024;
}

http {
    include       mime.types;
    default_type  application/octet-stream;
    sendfile        on;
    keepalive_timeout  65;

    gzip on;
    gzip_min_length 1k;     # 设置允许压缩的页面最小字节数
    gzip_buffers 4 16k;     # 用来存储 gzip 的压缩结果
    gzip_http_version 1.1;  # 识别 HTTP 协议版本
    gzip_comp_level 2;      # 设置 gzip 的压缩比 1-9。1 压缩比最小但最快，而 9 相反
    gzip_types gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml&#43;rss text/javascript; # 指定压缩类型
    gzip_proxied any;       # 无论后端服务器的 headers 头返回什么信息，都无条件启用压缩

    server {
        listen       80;
        server_name  192.168.225.2; ## 重要！！！修改成你的外网 IP/域名

        location / { ## 前端项目
            root   /work/projects/yudao-ui-admin;
            index  index.html index.htm;
            try_files $uri $uri/ /index.html;
        }

        location /admin-api/ { ## 后端项目 - 管理后台
            proxy_pass http://localhost:48080/admin-api/; ## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP
            proxy_set_header Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header REMOTE-HOST $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }

        location /app-api/ { ## 后端项目 - 用户 App
            proxy_pass http://localhost:48080/app-api/; ## 重要！！！proxy_pass 需要设置为后端项目所在服务器的 IP
            proxy_set_header Host $http_host;
            proxy_set_header X-Real-IP $remote_addr;
            proxy_set_header REMOTE-HOST $remote_addr;
            proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        }
    }
}</code></pre>
              </td>
            </tr>
          </tbody>
        </table>
      </figure>
    
  </div>
</figure>

<h2 id="chapter-5">V. COMMON</h2>
<hr>
<p>理解源码的核心设计思路, 具体技术知识见java-spring.md</p>
<h3 id="a-exception">A. Exception</h3>
<h3 id="b-log">B. Log</h3>
<p><strong>slf4j.Logger and log4j.Logger</strong>
<blockquote>
  <p>
Comparison SLF4J and Log4j<br/>

Unlike log4j, SLF4J (Simple Logging Facade for Java) is not an implementation of logging framework, 
it is an abstraction for all those logging frameworks in Java similar to log4J. Therefore, you cannot compare both. 
However, it is always difficult to prefer one between the two.
</p>
  <footer>
    <strong>LEARN SLF4J</strong>
    
      <cite><a href="https://www.tutorialspoint.com/slf4j/slf4j_vs_log4j.htm#:~:text=Comparison%20SLF4J%20and%20Log4j,prefer%20one%20between%20the%20two." target="_blank" rel="external">SLF4J Vs Log4j</a></cite>
    
  </footer>
</blockquote></p>


 
  
  
  
  
    
  
    
      
    
  

<div class="figure fig-100" >
  
    <a class="fancybox" href="https://www.tutorialspoint.com/slf4j/images/application.jpg" data-fancybox="">
  
    <img class="fig-img" src="https://www.tutorialspoint.com/slf4j/images/application.jpg" >
  
    </a>
  
  
</div>

<h3 id="c-cache">C. Cache</h3>
<p>Redis cache</p>
<p><a href="https://javaguide.cn/database/redis/redis-data-structures-01.html#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF-1">参考该文章</a></p>
<p>MyBatis Cache</p>
<p>MyBatis的一级缓存和二级缓存, 都存在可能脏读的情况, 所以一般惯用Redis做缓存
引入Redis后只需要将MyBatis配置文件中Cache 的类型定义为RedisCache</p>
<h3 id="d-streamutils">D. StreamUtils</h3>
<p>用得越来越多了, 有时间的话, 需要系统性学习一下</p>
<p>convertSet</p>
<p>convertMultiMap</p>
<p>convertMap</p>
<p>MapUtils.findAndThen</p>
<h3 id="epaylock">E.PayLock</h3>
<h3 id="ftenant">F.Tenant</h3>
<p>MyBatisPlusX</p>
<h3 id="g-connection-pool">G. Connection Pool</h3>
<p>Druid or Hikari -&gt; PearAdminPro用的是Hikari, 也是Springboot官方选用的
Druid是淘宝选用的, 高并发的情况会适用一些</p>
<h3 id="h-security">H. Security</h3>
<p>只记录配置, 新的, 技术链接看java-spring.md</p>
<h4 id="1-免登录改哪里">1. 免登录改哪里</h4>
<p>路径</p>
<h4 id="2-登录方式有哪些">2. 登录方式有哪些</h4>
<h4 id="3-permission权限设置-部门数据隔离">3. permission权限设置, 部门数据隔离</h4>
<p>PermissionServiceImpl</p>
<p>基于RBAC0模型，增加了对角色的一些限制：角色互斥、基数约束、先决条件角色等。</p>
<p>角色互斥：同一用户不能分配到一组互斥角色集合中的多个角色，互斥角色是指权限互相制约的两个角色。
案例：请款系统中一个用户不能同时被指派给申请角色和审批员角色。</p>
<p>基数约束：一个角色被分配的用户数量受限，它指的是有多少用户能拥有这个角色。
案例：一个角色专门为公司CEO创建的，那这个角色的数量是有限的。</p>
<p>先决条件角色：指要想获得较高的权限，要首先拥有低一级的权限。
案例：先有副总经理权限，才能有总经理权限。</p>
<p>运行时互斥：例如，允许一个用户具有两个角色的成员资格，但在运行中不可同时激活这两个角色，
案例：同一个用户拥有多个角色，角色的权限有重叠，以较大权限为准。</p>
<p><strong>岗位权限与角色权限有什么不同</strong></p>
<p>你可能没理解透彻，这里的【灵活】是可以解决实际问题的，从组织架构上来说，岗位&gt;角色（成员）</p>
<p>举个例子：</p>
<p>公司新增【销售经理】这个岗位，计划招20个【销售经理】，</p>
<p>1、第一步，新建岗位【销售经理】，配置该岗位的使用权限</p>
<p>2、开始招人，人员入职，新建员工信息，配置员工（角色）权限，此时就可以直接引用【销售经理】岗的配置权限，入职一个，引用一次，方便快捷</p>
<p>3、当公司想关闭某位【销售经理】的一些系统权限时，那么，单独配置角色权限的优势就显现了出来，可以直接找到该角色，关闭需要关闭的权限即可</p>
<p>岗位和角色的区别是，岗位是一个被引用者（模版），角色是使用者（应用），单个角色的变动不影响岗位原有的配置，不会影响到其他使用者或者后来使用者；并且权限结构与组织结构保持一致性</p>
<p>看你描述中的论证逻辑是</p>
<hr>
<p>因为岗位的权限跟角色都是需要在创建的时候配置的</p>
<p>因为角色权限能够跟岗位权限一样去做继承</p>
<p>所以“岗位”跟“角色”的本质是“一样”。</p>
<hr>
<p>这是对三段论的错误应用，因为第二条跟第一条没有逻辑关系。</p>
<p>岗位是这个用户的审批关系以及组织层级关系的体现，对应于物理上的组织架构并且有较严格的上下级关系，公司没有前台小姐姐就不会去设置“前台行政”这个“岗位”，在软件系统的应用中主要体现在OA审批流上，按岗位来判断流程节点的处理人是OA审批流一个常见场景；</p>
<p>角色是体现这个用户能够做什么功能，在软件系统中就是用户可以看到哪些功能按钮跟页面。功能做出来后没有对应的人去使用那你可以不给这个功能设置角色。</p>
<p>能够体现差异的场景：</p>
<p>（1）财务可以没有研发部的角色权限，但是他/她能够在研发部的经费审批流程进行审核。</p>
<p>（2）大多数软件都会内置“系统管理员”“admin”这样的角色，但很少公司会为每一个软件系统设置一个这样的岗位，小公司甚至直接就没有这个岗位没有人拥有这个角色的账号。</p>
<p>（3）用户A要填行政的每日考勤又要填人事的面试登记，但不涉及流程审批，这个可以直接就不设定“岗位”只给用户A设置一个行政角色跟一个人事角色。</p>
<h2 id="chapter-6">VI. APPENDIX</h2>
<hr>
<p>摘抄自网络, 不一定合理, 仅保存一些文字, 以便以后少写一些文字</p>
<h3 id="缩写信息">缩写信息</h3>
<ul>
<li>DAO: Data Access Object, 数据访问层</li>
<li>PO: Persistant Object, 持久层对象. 类似数据库内的一条记录</li>
<li>DO: Domain Object, 领域对象</li>
<li>DTO: Data Transfer Object, 通常在OpenApi返回的对象中使用DTO, 忠于表结构原始数值{&ldquo;age&rdquo;:40}</li>
<li>BO: Business Object, 业务对象</li>
<li>VO: Value Object, 表现对象 (如果需要, 则转换为具体表现的内容, 例如{&ldquo;age&rdquo;:40, &ldquo;desc&rdquo;:&ldquo;不惑之年&rdquo;})</li>
<li>POJO: Plain Old Java Object, 是PO/DO/DTO/BO/VO的统称</li>
</ul>
<h3 id="命名规范">命名规范</h3>
<ul>
<li>Service/DAO层方法命名规约
<ul>
<li>获取单个对象的方法用get做前缀</li>
<li><del>获取多个对象的方法用list做前缀</del></li>
<li>获取统计值的方法用count做前缀</li>
<li>插入的方法用save/insert做前缀</li>
<li>删除的方法用remove/delete做前缀</li>
<li>修改的方法用edit/update做前缀</li>
</ul>
</li>
<li><del>领域模型命名规约</del>
<ul>
<li>数据对象: xxxDO, xxx即表名</li>
<li>数据传输对象: xxxDTO, xxx即业务领域相关的名称</li>
<li>展示对象: xxxVO, xxx一般为网页名称</li>
<li>POJO是DO/DTO/BO/VO的统称, 禁止命名成xxxPOJO</li>
</ul>
</li>
</ul>
<h2 id="vii-tmp">VII. TMP</h2>
<hr>
<p><strong>可能需要大改ERP</strong>, 原因如下:</p>
<ul>
<li>定义的产品没有原料和成品之分</li>
<li>产品的barCode给Mall使用是比较恰当的(Tip: barCode可以帮助Mall区分一部手机的颜色/内存等). 而对外的商品SPU/SKU由Mall定义</li>
<li>注意, BtoC的Mall没有客户的概念, 只有C端用户而已</li>
<li>而对于BtoB的ERP, 有客户的概念, 但却缺少商品Code的定义, 比如<code>hf001</code>, <code>盛趣点券</code>等</li>
<li>另外, 结合现有业务产品线
<ul>
<li>背景:
<ol>
<li>门票类, BtoC, 不依赖上游, 平台在ERP生产入库, 供Mall使用. 而Mall中因为需要绑定虚拟身份的事情, 在Mall中做旁路(不使用类别作限制, 在产品中添加<code>needVirtualIdentity</code>)</li>
<li>手办类, BtoC, 依赖实体上游, 却(暂时)不用在系统中体现, 优先用Mall满足需求, 有进一步需求时再启用ERP支持</li>
<li>抽赏类, BtoC, 依赖实体上游, 系统管理手办及配赏, 优先用Mall满足需求, 有进一步需求时再启用ERP支持</li>
<li>充值类, BtoB, 依赖上游, 对下游提供接口, 其中比如<code>hf001</code>, <code>盛趣点券</code>等自定义码, 需要DIY</li>
</ol>
</li>
<li>统筹:
<ul>
<li>ERP的销售订单入口
<ul>
<li>可以专供背景<code>4.</code>, 其余三项的入口在小程序Mall</li>
<li>(暂时)不太需要在Controller中抽象通用的业务订单入口(指: 通过前端传递业务类别, 以区分调用哪种业务服务)</li>
<li>盛趣/网龙/话费, 多种toB产品, 前端分流, 后端</li>
</ul>
</li>
<li>ERP的产品定义
<ul>
<li><del>ERP的产品定义, 只需旁路增加<code>productNo</code>即可, 供下游使用, 与Mall无关</del> 偷懒使用<code>barCode</code>了, <strong>待定</strong></li>
<li><del>(严重)依赖其<code>categoryId</code>进行区分&quot;原料&quot;or&quot;成品&quot;,</del> 产品中增加字段,区分原料还是成品, 供&quot;生产监听服务&quot;生产/组装</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><strong>源码数据隔离的需求越来越大了</strong></p>
<p>搞定其原理, 测试数据隔离</p>
<ul>
<li>创展(Mall)</li>
<li>星尚(Mall)</li>
<li>智渔(ERP)</li>
<li>答案(ERP)</li>
<li>MMCZ(Measure)</li>
<li>佰娱(Kuji)</li>
</ul>
              


            </div>
          </div>
          <div id="post-footer" class="post-footer main-content-wrap">
            
              
                
                
                  <div class="post-footer-tags">
                    <span class="text-color-light text-small">TAGGED IN</span><br/>
                    
  <a class="tag tag--primary tag--small" href="https://ivanhan0511.github.io/tags/java/">Java</a>

  <a class="tag tag--primary tag--small" href="https://ivanhan0511.github.io/tags/springboot/">Springboot</a>

  <a class="tag tag--primary tag--small" href="https://ivanhan0511.github.io/tags/ruoyi-vue-pro/">ruoyi-vue-pro</a>

                  </div>
                
              
            
            
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://ivanhan0511.github.io/post/java-spring/" data-tooltip="Spring" aria-label="NEXT: Spring">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://ivanhan0511.github.io/post/os-windows11/" data-tooltip="DIY My Windows" aria-label="PREVIOUS: DIY My Windows">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


            
  
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the comments powered by Disqus.</noscript>
    </div>
    <script type="text/javascript">
      var disqus_config = function() {
        this.page.url = 'https:\/\/ivanhan0511.github.io\/post\/java-fork-ruoyi-vue-pro\/';
        
          this.page.identifier = '\/post\/java-fork-ruoyi-vue-pro\/'
        
      };
      (function() {
        
        
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
          document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
          return;
        }
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        var disqus_shortname = 'ivan-blog-disqus';
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
  


          </div>
        </article>
        <footer id="footer" class="main-content-wrap">
  <span class="copyrights">
    &copy; 2024 <a href="https://github.com/ivanhan0511">Ivan Han</a>. All Rights Reserved
  </span>
</footer>

      </div>
      <div id="bottom-bar" class="post-bottom-bar" data-behavior="4">
        
<div class="post-actions-wrap">
  <nav >
    <ul class="post-actions post-action-nav">
      
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://ivanhan0511.github.io/post/java-spring/" data-tooltip="Spring" aria-label="NEXT: Spring">
          
              <i class="fa fa-angle-left"></i>
              <span class="hide-xs hide-sm text-small icon-ml">NEXT</span>
            </a>
        </li>
        <li class="post-action">
          
            <a class="post-action-btn btn btn--default tooltip--top" href="https://ivanhan0511.github.io/post/os-windows11/" data-tooltip="DIY My Windows" aria-label="PREVIOUS: DIY My Windows">
          
              <span class="hide-xs hide-sm text-small icon-mr">PREVIOUS</span>
              <i class="fa fa-angle-right"></i>
            </a>
        </li>
      
    </ul>
  </nav>
<ul class="post-actions post-action-share" >
  
    <li class="post-action hide-lg hide-md hide-sm">
      <a class="post-action-btn btn btn--default btn-open-shareoptions" href="#btn-open-shareoptions" aria-label="Share this post">
        <i class="fa fa-share-alt" aria-hidden="true"></i>
      </a>
    </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/" title="Share on Facebook" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i>
        </a>
      </li>
    
      <li class="post-action hide-xs">
        <a class="post-action-btn btn btn--default" target="new" href="https://twitter.com/intent/tweet?text=https://ivanhan0511.github.io/post/java-fork-ruoyi-vue-pro/" title="Share on Twitter" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i>
        </a>
      </li>
    
  
  
    <li class="post-action">
      <a class="post-action-btn btn btn--default" href="#disqus_thread" aria-label="Leave a comment">
        <i class="far fa-comment"></i>
      </a>
    </li>
  
  <li class="post-action">
    
      <a class="post-action-btn btn btn--default" href="#top" aria-label="Back to top">
      <i class="fa fa-arrow-up" aria-hidden="true"></i>
    
    </a>
  </li>
</ul>
</div>


      </div>
      
<div id="share-options-bar" class="share-options-bar" data-behavior="4">
  <i id="btn-close-shareoptions" class="fa fa-times"></i>
  <ul class="share-options">
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fivanhan0511.github.io%2Fpost%2Fjava-fork-ruoyi-vue-pro%2F" aria-label="Share on Facebook">
          <i class="fab fa-facebook-square" aria-hidden="true"></i><span>Share on Facebook</span>
        </a>
      </li>
    
      <li class="share-option">
        <a class="share-option-btn" target="new" href="https://twitter.com/intent/tweet?text=https%3A%2F%2Fivanhan0511.github.io%2Fpost%2Fjava-fork-ruoyi-vue-pro%2F" aria-label="Share on Twitter">
          <i class="fab fa-twitter" aria-hidden="true"></i><span>Share on Twitter</span>
        </a>
      </li>
    
  </ul>
</div>
<div id="share-options-mask" class="share-options-mask"></div>


    </div>
    
    <div id="about">
  <div id="about-card">
    <div id="about-btn-close">
      <i class="fa fa-times"></i>
    </div>
    
      <img id="about-card-picture" src="https://www.gravatar.com/avatar/0cac315e34e792213d5fa694dc39777b?s=110" alt="Author&#39;s picture" />
    
    <h4 id="about-card-name">Ivan Han</h4>
    
      <div id="about-card-bio">I need <strong>slow down</strong></div>
    
    
      <div id="about-card-job">
        <i class="fa fa-briefcase"></i>
        <br/>
        Software Engineer
      </div>
    
    
      <div id="about-card-location">
        <i class="fa fa-map-marker-alt"></i>
        <br/>
        China
      </div>
    
  </div>
</div>

    

    
  
    
      <div id="cover" style="background-image:url('https://ivanhan0511.github.io/images/cover.jpg');"></div>
    
  


    
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js" integrity="sha512-894YE6QWD5I59HgZOGReFYm4dnWc1Qt5NtvYSaNcOP+u1T9qYdvdihz0PPSiiqn/+/3e7Jo4EaG7TubfWGUrMQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/highlight.min.js" integrity="sha512-z+/WWfyD5tccCukM4VvONpEtLmbAm5LDu7eKiyMQJ9m7OfPEDL7gENyDRL3Yfe8XAuGsS2fS4xSMnl6d30kqGQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha512-uURl+ZXMBrF4AwGaWmEetzrd+J5/8NRkWAvJx5sbPSSuOb0bZLqf+tOzniObO00BjHa/dD7gub9oCGMLPQHtQA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>


<script src="https://ivanhan0511.github.io/js/script-yqzy9wdlzix4lbbwdnzvwx3egsne77earqmn73v9uno8aupuph8wfguccut.min.js"></script>


  
    <script async crossorigin="anonymous" defer integrity="sha512-gE8KAQyFIzV1C9+GZ8TKJHZS2s+n7EjNtC+IMRn1l5+WYJTHOODUM6JSjZhFhqXmc7bG8Av6XXpckA4tYhflnw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/apache.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-EWROca+bote+7Oaaar1F6y74iZj1r1F9rm/ly7o+/FwJopbBaWtsFDmaKoZDd3QiGU2pGacBirHJNivmGLYrow==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/go.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-GDVzAn0wpx1yVtQsRWmFc6PhJiLBPdUic+h4GWgljBh904O3JU10fk9EKNpVyIoPqkFn54rgL2QBG4BmUTMpiQ==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/http.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-UgZlma8NzkrDb/NWgmLIcTrH7i/CSnLLDRFqCSNF5NGPpjKmzyM25qcoXGOup8+cDakKyaiTDd7N4dyH4YT+IA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/less.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-lot9koe73sfXIrUvIPM/UEhuMciN56RPyBdOyZgfO53P2lkWyyXN7J+njcxIIBRV+nVDQeiWtiXg+bLAJZDTfg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/nginx.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-Zd3e7XxHP00TD0Imr0PIfeM0fl0v95kMWuhyAS3Wn1UTSXTkz0OhtRgBAr4JlmADRgiXr4x7lpeUdqaGN8xIog==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/puppet.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-qtqDO052iXMSP+5d/aE/jMtL9vIIGvONgTJziC2K/ZIB1yEGa55WVxGE9/08rSQ62EoDifS9SWVGZ7ihSLhzMA==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/scss.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-1NmkjnEDnwwwcu28KoQF8vs3oaPFokQHbmbtwGhFfeDsQZtVFI8zW2aE9O8yMYdpdyKV/5blE4pSWw4Z/Sv97w==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/stylus.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-B2wSfruPjr8EJL6IIzQr1eAuDwrsfIfccNf/LCEdxELCgC/S/ZMt/Uvk80aD79m7IqOqW+Sw8nbkvha20yZpzg==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/swift.min.js"></script>
  

  
    <script async crossorigin="anonymous" defer integrity="sha512-28oDiQZGKUVN6wQ7PSLPNipOcmkCALXKwOi7bnkyFf8QiMZQxG9EQoy/iiNx6Zxj2cG2SbVa4dXKigQhu7GiFw==" src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.1.0/languages/yaml.min.js"></script>
  


<script>
$(document).ready(function() {
  hljs.configure({ classPrefix: '', useBR: false });
  $('pre.code-highlight > code, pre > code').each(function(i, block) {
    if (!$(this).hasClass('codeblock')) {
      $(this).addClass('codeblock');
    }
    hljs.highlightBlock(block);
  });
});
</script>




    
  </body>
</html>

